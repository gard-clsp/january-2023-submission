# utils/armory_clsp_poisoning.sh --ncpu 1 --ngpu 0 --armory-opts "" exp/poisoning_output/jhu_filtering/poisoning_v0_audio_p10_dino_clustering_filter_pytorch/config.json 
# Started at Mon Jan  9 13:25:45 EST 2023
#
exp/poisoning_output/jhu_filtering/poisoning_v0_audio_p10_dino_clustering_filter_pytorch/config.json
Testing if GPU is seen in Tensorflow
[]
=====================================================
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m31[0m Constructing Evaluator Object
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m62[0m Retrieving Environment Variables
2023-01-09 13:25:59  2s [33m[1mWARNING [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m70[0m Running in --no-docker mode. Setting 'image_name' to None
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_run_config[0m:[36m270[0m [1m[31mRunning evaluation script[0m
2023-01-09 13:25:59  0s [1mINFO    [0m [36marmory.delayed_imports[0m:[36m<module>[0m:[36m7[0m Importing and configuring torch, tensorflow, and art, if available. This may take some time.
2023-01-09 13:26:11 11s [1mINFO    [0m [36mart.config[0m:[36mset_data_path[0m:[36m55[0m set ART_DATA_PATH to /Users/thomas/.art/data
2023-01-09 13:26:15 15s [1mINFO    [0m [36mart.config[0m:[36mset_data_path[0m:[36m55[0m set ART_DATA_PATH to /Users/thomas/.armory/saved_models/art
2023-01-09 13:26:17 18s [31m[1mERROR   [0m [36marmory.scenarios.scenario[0m:[36mevaluate[0m:[36m449[0m Encountered error during scenario evaluation.

[33m[1mTraceback (most recent call last):[0m

  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/runpy.py", line 194, in _run_module_as_main
    return _run_code(code, main_globals, None,
           â”‚         â”‚     â”” {'__name__': '__main__', '__doc__': '\nMain script for running scenarios. Users will run a scenario by calling:\n    armory r...
           â”‚         â”” <code object <module> at 0x7f97792f4ea0, file "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenario...
           â”” <function _run_code at 0x7f97680935e0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/runpy.py", line 87, in _run_code
    exec(code, run_globals)
         â”‚     â”” {'__name__': '__main__', '__doc__': '\nMain script for running scenarios. Users will run a scenario by calling:\n    armory r...
         â”” <code object <module> at 0x7f97792f4ea0, file "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenario...
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/main.py", line 228, in <module>
    run_config(
    â”” <function run_config at 0x7f97590ad310>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/main.py", line 144, in run_config
    scenario.evaluate()
    â”‚        â”” <function Scenario.evaluate at 0x7f9798cb4ee0>
    â”” <armory.scenarios.poison.Poison object at 0x7f97680f13a0>
> File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/scenario.py", line 440, in evaluate
    self._evaluate()
    â”‚    â”” <function Scenario._evaluate at 0x7f9798cb4e50>
    â”” <armory.scenarios.poison.Poison object at 0x7f97680f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/scenario.py", line 429, in _evaluate
    self.load()
    â”‚    â”” <function Poison.load at 0x7f9798cb5e50>
    â”” <armory.scenarios.poison.Poison object at 0x7f97680f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/poison.py", line 471, in load
    self.load_model()
    â”‚    â”” <function Poison.load_model at 0x7f9798cb5700>
    â”” <armory.scenarios.poison.Poison object at 0x7f97680f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/poison.py", line 127, in load_model
    model, _ = config_loading.load_model(model_config)
               â”‚              â”‚          â”” {'fit': True, 'fit_kwargs': {'nb_epochs': 1}, 'model_kwargs': {}, 'module': 'local.models.audio_resnet50_torch', 'name': 'get...
               â”‚              â”” <function load_model at 0x7f97590a6d30>
               â”” <module 'armory.utils.config_loading' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/utils/confi...
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/utils/config_loading.py", line 90, in load_model
    model_module = import_module(model_config["module"])
                   â”‚             â”” {'fit': True, 'fit_kwargs': {'nb_epochs': 1}, 'model_kwargs': {}, 'module': 'local.models.audio_resnet50_torch', 'name': 'get...
                   â”” <function import_module at 0x7f97980ecaf0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           â”‚          â”‚           â”‚    â”‚        â”‚        â”” 0
           â”‚          â”‚           â”‚    â”‚        â”” None
           â”‚          â”‚           â”‚    â”” 0
           â”‚          â”‚           â”” 'local.models.audio_resnet50_torch'
           â”‚          â”” <function _gcd_import at 0x7f97b8095430>
           â”” <module 'importlib._bootstrap' (frozen)>
  File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
  File "<frozen importlib._bootstrap>", line 991, in _find_and_load
  File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 843, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed

  File "[32m/Volumes/Macintosh_HD-Data/Documents/GARD/january-2023-submission/local/models/[0m[32m[1maudio_resnet50_torch.py[0m", line [33m16[0m, in [35m<module>[0m
    [1mwindow[0m [35m[1m=[0m [1mtorch[0m[35m[1m.[0m[1mtensor[0m[1m([0m[1mtf[0m[35m[1m.[0m[1msignal[0m[35m[1m.[0m[1mhann_window[0m[1m([0m[34m[1m255[0m[1m)[0m[35m[1m.[0m[1mnumpy[0m[1m([0m[1m)[0m[1m)[0m[35m[1m.[0m[1mto[0m[1m([0m[1mdevice[0m [35m[1m=[0m [1mdevice[0m[1m)[0m
    [36m         â”‚     â”‚      â”‚  â”‚      â”‚                                     â”” [0m[36m[1mdevice(type='cuda')[0m
    [36m         â”‚     â”‚      â”‚  â”‚      â”” [0m[36m[1m<function hann_window at 0x7f9778a8d9d0>[0m
    [36m         â”‚     â”‚      â”‚  â”” [0m[36m[1m<module 'tensorflow._api.v2.signal' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/tensorflow/_api/v2/s...[0m
    [36m         â”‚     â”‚      â”” [0m[36m[1m<module 'tensorflow' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/tensorflow/__init__.py'>[0m
    [36m         â”‚     â”” [0m[36m[1m<built-in method tensor of type object at 0x110902630>[0m
    [36m         â”” [0m[36m[1m<module 'torch' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/torch/__init__.py'>[0m

  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/torch/cuda/__init__.py", line 208, in _lazy_init
    raise AssertionError("Torch not compiled with CUDA enabled")

[31m[1mAssertionError[0m:[1m Torch not compiled with CUDA enabled[0m
2023-01-09 13:26:19 22s [31m[1mERROR   [0m [36marmory.docker.host_management[0m:[36mexec_cmd[0m:[36m18[0m command /Users/thomas/miniconda3/envs/dino/bin/python -m armory.scenarios.main eyJfZGVzY3JpcHRpb24iOiAiU3BlZWNoIENvbW1hbmRzIERMQkQgcG9pc29uIGF1ZGlvIGNsYXNzaWZpY2F0aW9uIiwgImFkaG9jIjogeyJjb21wdXRlX2ZhaXJuZXNzX21ldHJpY3MiOiBmYWxzZSwgImV4cGVyaW1lbnRfaWQiOiAwLCAiZXhwbGFuYXRvcnlfbW9kZWwiOiBudWxsLCAiZnJhY3Rpb25fcG9pc29uZWQiOiAwLjEsICJwb2lzb25fZGF0YXNldCI6IHRydWUsICJzb3VyY2VfY2xhc3MiOiAxMSwgInNwbGl0X2lkIjogMCwgInRhcmdldF9jbGFzcyI6IDIsICJ0cmFpbl9lcG9jaHMiOiAyMCwgInVzZV9wb2lzb25fZmlsdGVyaW5nX2RlZmVuc2UiOiB0cnVlfSwgImF0dGFjayI6IHsia25vd2xlZGdlIjogImJsYWNrIiwgImt3YXJncyI6IHsiYmFja2Rvb3Jfa3dhcmdzIjogeyJiYWNrZG9vcl9wYXRoIjogIndoaXN0bGUud2F2IiwgImR1cmF0aW9uIjogMSwgInJhbmRvbSI6IGZhbHNlLCAic2FtcGxpbmdfcmF0ZSI6IDE2MDAwLCAic2NhbGUiOiAwLjEsICJzaGlmdCI6IDB9fSwgIm1vZHVsZSI6ICJhcm1vcnkuYXJ0X2V4cGVyaW1lbnRhbC5hdHRhY2tzLnBvaXNvbl9sb2FkZXJfYXVkaW8iLCAibmFtZSI6ICJwb2lzb25fbG9hZGVyX2F1ZGlvIn0sICJkYXRhc2V0IjogeyJiYXRjaF9zaXplIjogNjQsICJmcmFtZXdvcmsiOiAibnVtcHkiLCAibW9kdWxlIjogImFybW9yeS5kYXRhLmRhdGFzZXRzIiwgIm5hbWUiOiAic3BlZWNoX2NvbW1hbmRzIiwgInBhZF9kYXRhIjogdHJ1ZX0sICJkZWZlbnNlIjogeyJrd2FyZ3MiOiB7ImNsdXN0ZXJpbmdfbWV0aG9kIjogIktNZWFucyIsICJuYl9jbHVzdGVycyI6IDEwMDAsICJwYXRoX3RvX2luZGV4X2ZpbGUiOiAiLi9kYXRhX3RvX2tlZXAucGtsIn0sICJtb2R1bGUiOiAibG9jYWwuZGVmZW5jZXMuZGlub19maWx0ZXJpbmdfZGVmZW5zZSIsICJuYW1lIjogIkRpbm9DbHVzdGVyaW5nRGVmZW5zZSIsICJ0eXBlIjogIlBvaXNvbkZpbHRlcmluZ0RlZmVuY2UifSwgIm1ldHJpYyI6IG51bGwsICJtb2RlbCI6IHsiZml0IjogdHJ1ZSwgImZpdF9rd2FyZ3MiOiB7fSwgIm1vZGVsX2t3YXJncyI6IHt9LCAibW9kdWxlIjogImxvY2FsLm1vZGVscy5hdWRpb19yZXNuZXQ1MF90b3JjaCIsICJuYW1lIjogImdldF9hcnRfbW9kZWwiLCAid2VpZ2h0c19maWxlIjogbnVsbCwgIndyYXBwZXJfa3dhcmdzIjoge319LCAic2NlbmFyaW8iOiB7Imt3YXJncyI6IHsiZml0X2dlbmVyYXRvciI6IHRydWV9LCAibW9kdWxlIjogImFybW9yeS5zY2VuYXJpb3MucG9pc29uIiwgIm5hbWUiOiAiUG9pc29uIn0sICJzeXNjb25maWciOiB7ImRvY2tlcl9pbWFnZSI6ICJ0d29zaXhhcm1vcnkvcHl0b3JjaCIsICJleHRlcm5hbF9naXRodWJfcmVwbyI6IG51bGwsICJncHVzIjogImFsbCIsICJvdXRwdXRfZGlyIjogbnVsbCwgIm91dHB1dF9maWxlbmFtZSI6IG51bGwsICJzZXRfcHl0aG9uaGFzaHNlZWQiOiB0cnVlLCAidXNlX2dwdSI6IHRydWUsICJmaWxlcGF0aCI6ICJleHAvcG9pc29uaW5nX291dHB1dC9qaHVfZmlsdGVyaW5nL3BvaXNvbmluZ192MF9hdWRpb19wMTBfZGlub19jbHVzdGVyaW5nX2ZpbHRlcl9weXRvcmNoL2NvbmZpZy5qc29uIiwgIm5vX2RvY2tlciI6IHRydWUsICJjaGVjayI6IHRydWV9LCAiZXZhbF9pZCI6ICIyMDIzLTAxLTA5VDE4MjU1OS41NDE3NzQifQ== --no-docker --check --base64 did not finish cleanly
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36mrun[0m:[36m173[0m cleaning up...
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_cleanup[0m:[36m117[0m deleting tmp_dir /Users/thomas/.armory/tmp/2023-01-09T182559.541774
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_cleanup[0m:[36m136[0m results output written to:
/Users/thomas/.armory/outputs/2023-01-09T182559.541774/
# Accounting: time=34 threads=1
# Ended (code 1) at Mon Jan  9 13:26:19 EST 2023, elapsed time 34 seconds
