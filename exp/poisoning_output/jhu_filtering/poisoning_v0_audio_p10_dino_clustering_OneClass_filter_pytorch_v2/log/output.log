# utils/armory_clsp_poisoning.sh --ncpu 1 --ngpu 0 --armory-opts "" exp/poisoning_output/jhu_filtering/poisoning_v0_audio_p10_dino_clustering_OneClass_filter_pytorch_v2/config.json 
# Started at Mon Jan  9 13:25:45 EST 2023
#
exp/poisoning_output/jhu_filtering/poisoning_v0_audio_p10_dino_clustering_OneClass_filter_pytorch_v2/config.json
Testing if GPU is seen in Tensorflow
[]
=====================================================
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m31[0m Constructing Evaluator Object
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m62[0m Retrieving Environment Variables
2023-01-09 13:25:59  2s [33m[1mWARNING [0m [36marmory.eval.evaluator[0m:[36m__init__[0m:[36m70[0m Running in --no-docker mode. Setting 'image_name' to None
2023-01-09 13:25:59  2s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_run_config[0m:[36m270[0m [1m[31mRunning evaluation script[0m
2023-01-09 13:25:59  0s [1mINFO    [0m [36marmory.delayed_imports[0m:[36m<module>[0m:[36m7[0m Importing and configuring torch, tensorflow, and art, if available. This may take some time.
2023-01-09 13:26:11 11s [1mINFO    [0m [36mart.config[0m:[36mset_data_path[0m:[36m55[0m set ART_DATA_PATH to /Users/thomas/.art/data
2023-01-09 13:26:15 15s [1mINFO    [0m [36mart.config[0m:[36mset_data_path[0m:[36m55[0m set ART_DATA_PATH to /Users/thomas/.armory/saved_models/art
2023-01-09 13:26:17 18s [31m[1mERROR   [0m [36marmory.scenarios.scenario[0m:[36mevaluate[0m:[36m449[0m Encountered error during scenario evaluation.

[33m[1mTraceback (most recent call last):[0m

  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/runpy.py", line 194, in _run_module_as_main
    return _run_code(code, main_globals, None,
           â”‚         â”‚     â”” {'__name__': '__main__', '__doc__': '\nMain script for running scenarios. Users will run a scenario by calling:\n    armory r...
           â”‚         â”” <code object <module> at 0x7fdaf94b4ea0, file "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenario...
           â”” <function _run_code at 0x7fdb380935e0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/runpy.py", line 87, in _run_code
    exec(code, run_globals)
         â”‚     â”” {'__name__': '__main__', '__doc__': '\nMain script for running scenarios. Users will run a scenario by calling:\n    armory r...
         â”” <code object <module> at 0x7fdaf94b4ea0, file "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenario...
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/main.py", line 228, in <module>
    run_config(
    â”” <function run_config at 0x7fdaf139d310>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/main.py", line 144, in run_config
    scenario.evaluate()
    â”‚        â”” <function Scenario.evaluate at 0x7fdae9474ee0>
    â”” <armory.scenarios.poison.Poison object at 0x7fdaf00f13a0>
> File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/scenario.py", line 440, in evaluate
    self._evaluate()
    â”‚    â”” <function Scenario._evaluate at 0x7fdae9474e50>
    â”” <armory.scenarios.poison.Poison object at 0x7fdaf00f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/scenario.py", line 429, in _evaluate
    self.load()
    â”‚    â”” <function Poison.load at 0x7fdae9475e50>
    â”” <armory.scenarios.poison.Poison object at 0x7fdaf00f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/poison.py", line 471, in load
    self.load_model()
    â”‚    â”” <function Poison.load_model at 0x7fdae9475700>
    â”” <armory.scenarios.poison.Poison object at 0x7fdaf00f13a0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/scenarios/poison.py", line 127, in load_model
    model, _ = config_loading.load_model(model_config)
               â”‚              â”‚          â”” {'fit': True, 'fit_kwargs': {'nb_epochs': 1}, 'model_kwargs': {}, 'module': 'local.models.audio_resnet50_torch', 'name': 'get...
               â”‚              â”” <function load_model at 0x7fdaf1396d30>
               â”” <module 'armory.utils.config_loading' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/utils/confi...
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/armory/utils/config_loading.py", line 90, in load_model
    model_module = import_module(model_config["module"])
                   â”‚             â”” {'fit': True, 'fit_kwargs': {'nb_epochs': 1}, 'model_kwargs': {}, 'module': 'local.models.audio_resnet50_torch', 'name': 'get...
                   â”” <function import_module at 0x7fdb481c4af0>
  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           â”‚          â”‚           â”‚    â”‚        â”‚        â”” 0
           â”‚          â”‚           â”‚    â”‚        â”” None
           â”‚          â”‚           â”‚    â”” 0
           â”‚          â”‚           â”” 'local.models.audio_resnet50_torch'
           â”‚          â”” <function _gcd_import at 0x7fdb48095430>
           â”” <module 'importlib._bootstrap' (frozen)>
  File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
  File "<frozen importlib._bootstrap>", line 991, in _find_and_load
  File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 843, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed

  File "[32m/Volumes/Macintosh_HD-Data/Documents/GARD/january-2023-submission/local/models/[0m[32m[1maudio_resnet50_torch.py[0m", line [33m16[0m, in [35m<module>[0m
    [1mwindow[0m [35m[1m=[0m [1mtorch[0m[35m[1m.[0m[1mtensor[0m[1m([0m[1mtf[0m[35m[1m.[0m[1msignal[0m[35m[1m.[0m[1mhann_window[0m[1m([0m[34m[1m255[0m[1m)[0m[35m[1m.[0m[1mnumpy[0m[1m([0m[1m)[0m[1m)[0m[35m[1m.[0m[1mto[0m[1m([0m[1mdevice[0m [35m[1m=[0m [1mdevice[0m[1m)[0m
    [36m         â”‚     â”‚      â”‚  â”‚      â”‚                                     â”” [0m[36m[1mdevice(type='cuda')[0m
    [36m         â”‚     â”‚      â”‚  â”‚      â”” [0m[36m[1m<function hann_window at 0x7fdb38bc59d0>[0m
    [36m         â”‚     â”‚      â”‚  â”” [0m[36m[1m<module 'tensorflow._api.v2.signal' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/tensorflow/_api/v2/s...[0m
    [36m         â”‚     â”‚      â”” [0m[36m[1m<module 'tensorflow' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/tensorflow/__init__.py'>[0m
    [36m         â”‚     â”” [0m[36m[1m<built-in method tensor of type object at 0x115931630>[0m
    [36m         â”” [0m[36m[1m<module 'torch' from '/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/torch/__init__.py'>[0m

  File "/Users/thomas/miniconda3/envs/dino/lib/python3.8/site-packages/torch/cuda/__init__.py", line 208, in _lazy_init
    raise AssertionError("Torch not compiled with CUDA enabled")

[31m[1mAssertionError[0m:[1m Torch not compiled with CUDA enabled[0m
2023-01-09 13:26:19 22s [31m[1mERROR   [0m [36marmory.docker.host_management[0m:[36mexec_cmd[0m:[36m18[0m command /Users/thomas/miniconda3/envs/dino/bin/python -m armory.scenarios.main eyJfZGVzY3JpcHRpb24iOiAiU3BlZWNoIENvbW1hbmRzIERMQkQgcG9pc29uIGF1ZGlvIGNsYXNzaWZpY2F0aW9uIiwgImFkaG9jIjogeyJjb21wdXRlX2ZhaXJuZXNzX21ldHJpY3MiOiBmYWxzZSwgImV4cGVyaW1lbnRfaWQiOiAwLCAiZXhwbGFuYXRvcnlfbW9kZWwiOiBudWxsLCAiZnJhY3Rpb25fcG9pc29uZWQiOiAwLjEsICJwb2lzb25fZGF0YXNldCI6IHRydWUsICJzb3VyY2VfY2xhc3MiOiAxMSwgInNwbGl0X2lkIjogMCwgInRhcmdldF9jbGFzcyI6IDIsICJ0cmFpbl9lcG9jaHMiOiAyMCwgInVzZV9wb2lzb25fZmlsdGVyaW5nX2RlZmVuc2UiOiB0cnVlfSwgImF0dGFjayI6IHsia25vd2xlZGdlIjogImJsYWNrIiwgImt3YXJncyI6IHsiYmFja2Rvb3Jfa3dhcmdzIjogeyJiYWNrZG9vcl9wYXRoIjogIi9leHBvcnQvYjEwL3Nqb3NoaS9jb2Rlcy9nYXJkLXNwZWVjaC9lZ3MtY2xzcC9ldmFsLXBvaXNvbmluZy1Hb29nbGVTcGVlY2hDb21tYW5kcy92MC9hcm1vcnlfYXR0YWNrX3RyaWdnZXJfd2F2L2NsYXBwaW5nLndhdiIsICJkdXJhdGlvbiI6IDEsICJyYW5kb20iOiBmYWxzZSwgInNhbXBsaW5nX3JhdGUiOiAxNjAwMCwgInNjYWxlIjogMC4xLCAic2hpZnQiOiAwfX0sICJtb2R1bGUiOiAiYXJtb3J5LmFydF9leHBlcmltZW50YWwuYXR0YWNrcy5wb2lzb25fbG9hZGVyX2F1ZGlvIiwgIm5hbWUiOiAicG9pc29uX2xvYWRlcl9hdWRpbyJ9LCAiZGF0YXNldCI6IHsiYmF0Y2hfc2l6ZSI6IDY0LCAiZnJhbWV3b3JrIjogIm51bXB5IiwgIm1vZHVsZSI6ICJhcm1vcnkuZGF0YS5kYXRhc2V0cyIsICJuYW1lIjogInNwZWVjaF9jb21tYW5kcyIsICJwYWRfZGF0YSI6IHRydWV9LCAiZGVmZW5zZSI6IHsia3dhcmdzIjogeyJjbHVzdGVyaW5nX21ldGhvZCI6ICJLTWVhbnMiLCAibmJfY2x1c3RlcnMiOiAxMDAwLCAicGF0aF90b19pbmRleF9maWxlIjogIi9leHBvcnQvYjE3L3R0aGViYXUxL0dBUkRfRElOT3JlcHJfdHJhaW4xMDAvZGF0YV90b19rZWVwXzFjbGFzc19hdHRhY2tlZC5wa2wifSwgIm1vZHVsZSI6ICJsb2NhbC5kZWZlbmNlcy5kaW5vX2ZpbHRlcmluZ19kZWZlbnNlIiwgIm5hbWUiOiAiRGlub0NsdXN0ZXJpbmdEZWZlbnNlIiwgInR5cGUiOiAiUG9pc29uRmlsdGVyaW5nRGVmZW5jZSJ9LCAibWV0cmljIjogbnVsbCwgIm1vZGVsIjogeyJmaXQiOiB0cnVlLCAiZml0X2t3YXJncyI6IHt9LCAibW9kZWxfa3dhcmdzIjoge30sICJtb2R1bGUiOiAibG9jYWwubW9kZWxzLmF1ZGlvX3Jlc25ldDUwX3RvcmNoIiwgIm5hbWUiOiAiZ2V0X2FydF9tb2RlbCIsICJ3ZWlnaHRzX2ZpbGUiOiBudWxsLCAid3JhcHBlcl9rd2FyZ3MiOiB7fX0sICJzY2VuYXJpbyI6IHsia3dhcmdzIjogeyJmaXRfZ2VuZXJhdG9yIjogdHJ1ZX0sICJtb2R1bGUiOiAiYXJtb3J5LnNjZW5hcmlvcy5wb2lzb24iLCAibmFtZSI6ICJQb2lzb24ifSwgInN5c2NvbmZpZyI6IHsiZG9ja2VyX2ltYWdlIjogInR3b3NpeGFybW9yeS9weXRvcmNoIiwgImV4dGVybmFsX2dpdGh1Yl9yZXBvIjogbnVsbCwgImdwdXMiOiAiYWxsIiwgIm91dHB1dF9kaXIiOiBudWxsLCAib3V0cHV0X2ZpbGVuYW1lIjogbnVsbCwgInNldF9weXRob25oYXNoc2VlZCI6IHRydWUsICJ1c2VfZ3B1IjogdHJ1ZSwgImZpbGVwYXRoIjogImV4cC9wb2lzb25pbmdfb3V0cHV0L2podV9maWx0ZXJpbmcvcG9pc29uaW5nX3YwX2F1ZGlvX3AxMF9kaW5vX2NsdXN0ZXJpbmdfT25lQ2xhc3NfZmlsdGVyX3B5dG9yY2hfdjIvY29uZmlnLmpzb24iLCAibm9fZG9ja2VyIjogdHJ1ZSwgImNoZWNrIjogdHJ1ZX0sICJldmFsX2lkIjogIjIwMjMtMDEtMDlUMTgyNTU5LjU0MTc2OCJ9 --no-docker --check --base64 did not finish cleanly
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36mrun[0m:[36m173[0m cleaning up...
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_cleanup[0m:[36m117[0m deleting tmp_dir /Users/thomas/.armory/tmp/2023-01-09T182559.541768
2023-01-09 13:26:19 22s [1mINFO    [0m [36marmory.eval.evaluator[0m:[36m_cleanup[0m:[36m136[0m results output written to:
/Users/thomas/.armory/outputs/2023-01-09T182559.541768/
# Accounting: time=34 threads=1
# Ended (code 1) at Mon Jan  9 13:26:19 EST 2023, elapsed time 34 seconds
